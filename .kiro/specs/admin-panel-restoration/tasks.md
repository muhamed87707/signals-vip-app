# خطة تنفيذ استعادة لوحة الإدارة المحسنة

## نظرة عامة

هذه الخطة تحدد المهام المطلوبة لاستعادة وتحسين لوحة الإدارة، مع التركيز على استعادة الوظائف المفقودة وتحسين تجربة المستخدم بشكل تدريجي ومنظم.

## المهام

- [-] 1. إعداد البنية الأساسية والملفات
  - إنشاء ملف CSS مخصص للوحة الإدارة (admin.css)
  - إعداد الواجهات والأنواع في TypeScript
  - تحديث ملف الترجمات بالنصوص المفقودة
  - _المتطلبات: 10.1, 10.2_

- [ ] 1.1 كتابة اختبار خاصية لحفظ الإعدادات
  - **الخاصية 8: حفظ الإعدادات**
  - **يتحقق من: المتطلبات 8.6, 8.7**

- [ ] 2. استعادة نظام التبويبات المحسن
  - [ ] 2.1 تنفيذ مكون التبويبات الأربعة (النشر، الإشارات، VIP، الإعدادات)
    - إضافة حالة التبويب النشط
    - تنفيذ وظيفة التبديل بين التبويبات
    - إضافة الأيقونات والعدادات الديناميكية
    - _المتطلبات: 1.1, 1.2, 1.4_

  - [ ] 2.2 تنفيذ حفظ حالة التبويبات
    - حفظ البيانات المدخلة عند التنقل
    - استعادة البيانات عند العودة للتبويب
    - _المتطلبات: 1.3_

- [ ] 2.3 كتابة اختبار خاصية لحفظ حالة التبويبات
  - **الخاصية 1: حفظ حالة التبويبات**
  - **يتحقق من: المتطلبات 1.3**

- [ ] 3. تحسين نظام رفع وإدارة الصور
  - [ ] 3.1 تنفيذ رفع الصور بالسحب والإفلات
    - إضافة معالج السحب والإفلات
    - عرض معاينة فورية للصورة
    - إضافة زر تغيير الصورة
    - _المتطلبات: 2.1, 2.4_

  - [ ] 3.2 تنفيذ لصق الصور من الحافظة
    - إضافة معالج حدث اللصق
    - التعرف على الصور في الحافظة
    - معالجة الصور الملصقة
    - _المتطلبات: 2.2_

  - [ ] 3.3 تنفيذ إنشاء النسخ المطمسة للإشارات VIP
    - إنشاء دالة createBlurredImage
    - تطبيق تأثير التطميس على الصور
    - إضافة أيقونة القفل الذهبية
    - _المتطلبات: 2.3, 6.2_

  - [ ] 3.4 تنفيذ ضغط الصور التلقائي
    - إضافة دالة ضغط الصور
    - تحسين جودة الصور للأداء
    - _المتطلبات: 2.6_

- [ ] 3.5 كتابة اختبار خاصية لمعالجة الصور
  - **الخاصية 2: معالجة الصور الآمنة**
  - **يتحقق من: المتطلبات 2.1, 2.2**

- [ ] 3.6 كتابة اختبار خاصية للتطميس التلقائي
  - **الخاصية 3: التطميس التلقائي للإشارات VIP**
  - **يتحقق من: المتطلبات 2.3, 6.2**

- [ ] 4. استعادة نظام توليد المحتوى بالذكاء الاصطناعي
  - [ ] 4.1 تنفيذ واجهة إعدادات الذكاء الاصطناعي
    - إضافة حقول مفتاح API والنموذج
    - إضافة حقل عدد المنشورات
    - إضافة حقل القالب المخصص
    - _المتطلبات: 3.5, 3.6, 3.7_

  - [ ] 4.2 تنفيذ دالة توليد المحتوى
    - إنشاء دالة generateAIPosts
    - الاتصال بـ Gemini API
    - معالجة الاستجابة وتنظيف النصوص
    - _المتطلبات: 3.1_

  - [ ] 4.3 تنفيذ عرض النسخ المولدة
    - عرض النسخ في شبكة قابلة للتمرير
    - إضافة إمكانية الاختيار والتحديد
    - إبراز النسخة المختارة بصرياً
    - _المتطلبات: 3.2, 3.3_

  - [ ] 4.4 تنفيذ استخدام النسخة المختارة في النشر
    - ربط النسخة المختارة بنموذج النشر
    - استخدام النسخة في النشر النهائي
    - _المتطلبات: 3.4_

- [ ] 4.5 كتابة اختبار خاصية لتوليد المحتوى
  - **الخاصية 4: توليد المحتوى بالذكاء الاصطناعي**
  - **يتحقق من: المتطلبات 3.1, 3.2**

- [ ] 4.6 كتابة اختبار خاصية لاختيار النسخ
  - **الخاصية 5: اختيار النسخ المولدة**
  - **يتحقق من: المتطلبات 3.3, 3.4**

- [ ] 5. نقطة تفتيش - التأكد من نجاح جميع الاختبارات
  - التأكد من نجاح جميع الاختبارات، اسأل المستخدم إذا كانت هناك أسئلة.

- [ ] 6. تحسين نظام إدارة أنواع الإشارات
  - [ ] 6.1 تنفيذ أزرار اختيار أنواع الإشارات
    - إضافة أزرار VIP، مجاني، ومنشور عادي
    - تطبيق التصميم المميز لكل نوع
    - حفظ النوع المختار كإعداد افتراضي
    - _المتطلبات: 4.1, 4.5, 4.6_

  - [ ] 6.2 تنفيذ سلوك كل نوع إشارة
    - تطبيق التطميس للإشارات VIP
    - نشر الصور الواضحة للإشارات المجانية
    - معالجة المنشورات العادية
    - _المتطلبات: 4.2, 4.3, 4.4_

- [ ] 7. استعادة نظام التحرير المتقدم
  - [ ] 7.1 تنفيذ وظيفة التحرير
    - إضافة زر التحرير لكل إشارة
    - تحميل بيانات الإشارة في النموذج
    - عرض شارة وضع التحرير
    - _المتطلبات: 5.1, 5.2_

  - [ ] 7.2 تنفيذ وظيفة التحديث
    - حفظ التغييرات في قاعدة البيانات
    - تحديث العرض فوراً
    - _المتطلبات: 5.3_

  - [ ] 7.3 تنفيذ وظيفة إلغاء التحرير
    - إضافة زر إلغاء واضح
    - تأكيد الإجراء قبل الإلغاء
    - مسح البيانات المؤقتة
    - _المتطلبات: 5.4_

  - [ ] 7.4 تنفيذ التمرير التلقائي لنموذج التحرير
    - التمرير إلى الأعلى عند تفعيل التحرير
    - _المتطلبات: 5.6_

- [ ] 7.5 كتابة اختبار خاصية لتحرير الإشارات
  - **الخاصية 6: تحرير الإشارات**
  - **يتحقق من: المتطلبات 5.1, 5.2**

- [ ] 8. تحسين نظام إعدادات التليجرام
  - [ ] 8.1 تنفيذ خيار تفعيل/إلغاء النشر في التليجرام
    - إضافة مربع اختيار للنشر في التليجرام
    - حفظ الاختيار مع الإشارة
    - _المتطلبات: 6.1_

  - [ ] 8.2 تنفيذ أزرار التليجرام التفاعلية
    - إضافة أربعة أنواع من الأزرار
    - تطبيق التصميم المميز لكل زر
    - _المتطلبات: 6.2, 6.3_

  - [ ] 8.3 تنفيذ إرسال الصور للتليجرام
    - إرسال الصور المطمسة للإشارات VIP
    - إرسال الصور الواضحة للإشارات المجانية
    - _المتطلبات: 6.6_

- [ ] 9. استعادة نظام إدارة المستخدمين VIP المتقدم
  - [ ] 9.1 تنفيذ نموذج إضافة مستخدمين VIP
    - إضافة حقول معرف التليجرام والمدة
    - إضافة خيار الاشتراك مدى الحياة
    - _المتطلبات: 7.1, 7.2_

  - [ ] 9.2 تنفيذ حساب تواريخ الاشتراك
    - حساب تاريخ البداية والانتهاء تلقائياً
    - حفظ البيانات في قاعدة البيانات
    - _المتطلبات: 7.3_

  - [ ] 9.3 تنفيذ جدول المستخدمين VIP
    - عرض جميع المستخدمين VIP
    - عرض حالة الاشتراك والأيام المتبقية
    - _المتطلبات: 7.4, 7.5_

  - [ ] 9.4 تنفيذ حذف المستخدمين
    - إضافة زر حذف لكل مستخدم
    - تأكيد الإجراء قبل الحذف
    - _المتطلبات: 7.7_

- [ ] 9.5 كتابة اختبار خاصية لإدارة المستخدمين VIP
  - **الخاصية 7: إدارة المستخدمين VIP**
  - **يتحقق من: المتطلبات 7.2, 7.3**

- [ ] 10. نقطة تفتيش - التأكد من نجاح جميع الاختبارات
  - التأكد من نجاح جميع الاختبارات، اسأل المستخدم إذا كانت هناك أسئلة.

- [ ] 11. تحسين نظام الإعدادات والتخصيص
  - [ ] 11.1 تنفيذ قسم الإعدادات
    - إنشاء تبويب الإعدادات
    - إضافة جميع حقول الإعدادات
    - _المتطلبات: 8.1_

  - [ ] 11.2 تنفيذ حفظ الإعدادات
    - حفظ الإعدادات في قاعدة البيانات
    - تشفير مفتاح API قبل الحفظ
    - عرض رسالة تأكيد
    - _المتطلبات: 8.2, 8.6, 8.7_

  - [ ] 11.3 تنفيذ تحميل الإعدادات
    - تحميل الإعدادات عند بدء التشغيل
    - تطبيق الإعدادات على الواجهة
    - _المتطلبات: 8.1_

- [ ] 12. تحسين تجربة المستخدم والاستجابة
  - [ ] 12.1 تنفيذ مؤشرات التحميل
    - إضافة مؤشرات لجميع العمليات الطويلة
    - تحسين تجربة الانتظار
    - _المتطلبات: 9.2_

  - [ ] 12.2 تنفيذ رسائل النجاح والأخطاء
    - إضافة نظام رسائل موحد
    - عرض رسائل واضحة ومفيدة
    - _المتطلبات: 9.4, 9.7_

  - [ ] 12.3 تنفيذ الحفظ التلقائي
    - حفظ حالة النموذج تلقائياً
    - استعادة البيانات عند إعادة التحميل
    - _المتطلبات: 9.5_

- [ ] 12.4 كتابة اختبار خاصية للاستجابة السريعة
  - **الخاصية 9: الاستجابة السريعة**
  - **يتحقق من: المتطلبات 9.1, 9.2**

- [ ] 12.5 كتابة اختبار خاصية لمعالجة الأخطاء
  - **الخاصية 10: معالجة الأخطاء**
  - **يتحقق من: المتطلبات 9.4**

- [ ] 13. استعادة نظام CSS المخصص والتصميم
  - [ ] 13.1 إنشاء ملف admin.css
    - إضافة جميع أنماط لوحة الإدارة
    - تطبيق نظام الألوان الذهبي
    - _المتطلبات: 10.1, 10.2_

  - [ ] 13.2 تنفيذ الوضع المظلم
    - تطبيق الوضع المظلم كإعداد افتراضي
    - _المتطلبات: 10.3_

  - [ ] 13.3 تنفيذ دعم اللغة العربية
    - دعم الاتجاه من اليمين لليسار
    - تطبيق الخطوط المناسبة
    - _المتطلبات: 10.6_

  - [ ] 13.4 تنفيذ التأثيرات الانتقالية
    - إضافة تأثيرات سلسة بين العناصر
    - تحسين التجربة البصرية
    - _المتطلبات: 10.5_

- [ ] 14. اختبار التكامل الشامل
  - [ ] 14.1 اختبار تدفق النشر الكامل
    - من رفع الصورة إلى النشر في التليجرام
    - التأكد من عمل جميع الخطوات

  - [ ] 14.2 اختبار تدفق التحرير الكامل
    - من اختيار الإشارة إلى حفظ التحديثات
    - التأكد من حفظ جميع التغييرات

  - [ ] 14.3 اختبار تدفق إدارة VIP الكامل
    - من إضافة المستخدم إلى انتهاء الاشتراك
    - التأكد من دقة الحسابات

  - [ ] 14.4 اختبار تدفق الإعدادات الكامل
    - من التغيير إلى التطبيق في الواجهة
    - التأكد من حفظ جميع الإعدادات

- [ ] 15. نقطة تفتيش نهائية - التأكد من نجاح جميع الاختبارات
  - التأكد من نجاح جميع الاختبارات، اسأل المستخدم إذا كانت هناك أسئلة.

## ملاحظات

- جميع المهام مطلوبة للحصول على تطوير شامل وعالي الجودة
- كل مهمة تشير إلى المتطلبات المحددة لسهولة التتبع
- نقاط التفتيش تضمن التحقق التدريجي من الجودة
- اختبارات الخصائص تتحقق من الصحة العامة عبر جميع المدخلات
- اختبارات الوحدة تتحقق من أمثلة محددة وحالات حدية